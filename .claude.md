# 项目开发工作流

## 项目概述

基于 Next.js 15 构建的现代化个人博客系统，采用复古终端风格设计。

### 核心特性
- 📝 **在线内容管理** - 内置管理后台 (`/admin`)，支持 WYSIWYG 编辑
- 🚀 **一键发布** - 保存后自动 git commit & push
- ⚡ **静态导出** - 纯 HTML/CSS/JS，无服务器依赖
- 🎮 **终端风格** - 复古计算机美学设计
- 🌓 **主题切换** - 支持亮色/暗色模式

### 技术栈
- Next.js 15.1+ (React 19)
- TypeScript 5.7+
- Tailwind CSS 3.4+
- Content Collections 0.13+
- TipTap 2.27+ (富文本编辑)

## 开发阶段

本项目遵循以下开发流程，请按顺序执行：

### 1. 需求阶段 💡
- 使用 `/brainstorm` 进行头脑风暴
- 整理需求要点
- 确定功能范围

### 2. 设计阶段 📐
- 编写技术设计文档
- 确定技术栈
- 设计数据结构和 API
- 规划目录结构

### 3. 计划阶段 📋
- 使用 `/plan` 制定开发计划
- 分解任务列表
- 确定优先级

### 4. 开发阶段 💻
- 按计划逐步实现
- 每完成一个功能：
  - 运行测试验证
  - 使用 `/commit` 提交代码
- 保持代码整洁

### 5. 测试阶段 🧪
- 运行完整测试套件
- 修复发现的问题
- 验收测试

### 6. 提交阶段 ✅
- 最终代码审查
- 更新文档
- 推送到远程

## 代码规范

- 保持函数简洁，单一职责
- 添加必要的注释
- 遵循项目代码风格
- 提交前确保测试通过

## Git 提交规范

使用 Conventional Commits 格式：
- `feat:` 新功能
- `fix:` 修复 bug
- `docs:` 文档变更
- `refactor:` 重构
- `test:` 测试相关
- `chore:` 构建/工具

## 内容管理工作流

### 在线编辑（推荐）
1. 访问 `/admin` 进入管理后台
2. 点击"新建文章"或编辑现有文章
3. 填写标题、内容、标签等信息
4. 点击"保存"保存为草稿
5. 点击"发布"按钮一键推送到 Git

### Admin API 路由
- `GET/POST /api/admin/posts/` - 文章列表/创建
- `GET/PUT/DELETE /api/admin/posts/[...slug]/` - 文章操作
- `POST /api/admin/git/publish` - 一键发布

## 构建与部署

### 开发命令
| 命令 | 说明 |
|------|------|
| `npm run dev` | 启动开发服务器 |
| `npm run build:static` | 构建静态站点 |
| `npm run preview` | 预览构建结果 |
| `npm run lint` | 运行 ESLint 检查 |
| `npm run type-check` | 运行 TypeScript 类型检查 |

### 静态导出说明
- 管理后台 (`/admin`) 和 API 路由不会导出到静态构建
- 使用 `output: 'export'` 配置
- 构建输出目录: `out/`

## 自动化提醒

- 代码修改后自动标记需要测试
- 提交前检查测试状态
- 保持频繁提交，小步快跑
